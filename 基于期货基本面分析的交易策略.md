
> Name

基于期货基本面分析的交易策略

> Author

扫地僧

> Strategy Description

#### 一、摘要
在期货交易市场，无论是私募机构还是普通散户，争论技术分析和基本面分析谁好谁坏，从来就没有停止过。技术分析者认为价格已经包含了一切，相信未来价格还以趋势方式演变，只关心图表上价格行为本身的变化，判断它能卖多少钱。基本面分析者认为真正价值最终将会反映在价格上，并不需要关心短期价格走势，更多的是分析影响价格背后的因素，判断它值多少钱。

#### 二、基本面分析的难点
之前听过这样一句话：“散户可以完全无视基本面分析，只需要关注技术分析即可。”当时不以为然，但随着时间的推移，和大量实盘的磨砺，现在回过头看，也渐渐接受了这种观点，因为传统的基本面分析相对于散户来说，门槛真的很高，想要分析某些事合力后会发生什么结果，最起码获取与之关联的数据是全面的、准确的。否则，再怎么分析，也只是片面的。

**影响期货基本面分析的因素**
- 宏观
    - 宏观政策
    - 产业政策
    - 政治因素
    - 外汇汇率
    - 经济周期
    - 货币政策
- 品种
    - 升水贴水
    - 供需关系
    - 商品库存
    - 产业利润
- 其他
    - 季节因素
    - 天气因素
    - 新闻事件
    - 市场情绪

如上面这个列表，与商品期货基本面分析有关的三大因素，林林总总多达数十项，往细了分，更有几十项之多，并且这些数据是在不停变化的。单个散户想要获取这些庞大的数据已经是力所不及的事了，更不用提客观分析。所以从这一点来讲，在机构和散户共存的市场中，散户在起跑线上就已经处于劣势中。尽管机构也不是近乎完美，但相对于散户，有更多的优势去获取更多更准确的信息，以及素质更高的分析团队。所以，在只论输赢的交易市场，散户的赢面很小。那么有没有合适散户的基本面分析法呢？

#### 三、期货基本分析的核心
其实，期货的基本面分析并不是想象中那么难，只需要抓住基本面分析核心要素，就能剥丝抽茧从错综复杂的信息中找出规律。我们知道影响商品期货的三大因素中包括：宏观、品种、其他。宏观经济数据复杂多变，每天每时每刻，地球上有太多的经济数据公布，各国政界、央行、投行，官方的和非官方的。除了政治和经济危机外，宏观分析是聊天的好材料，实用性不大。美国著名的基金管理专家彼得·林奇曾发表看法：“我每年花在经济大势上的分析时间不超出十五分钟”。

另外，在季节因素、天气因素、新闻事件、市场情绪中，很多都是突发事件，本身就是无法分析预测的。所以散户只需要把精力放在品种上即可，因为期货和现货的价格都是公开的，可以计算出升水还是贴水。现货的库存数据在一些网站还是比较容易获取的，可以预判出相对的供需关系等等，从而判断期货未来的大概价值。

**升水贴水**
 ![IMG](https://www.fmz.cn/upload/asset/39e847769334374aaff3.png) 
同样一个商品品种，在现货市场与期货市场的价格差，叫做基差。如果期货价格大于现货价格，我们称之为期货升水；如果期货价格小于现货价格，我们称之为期货贴水。无论是升水还是贴水，随着交割日期的临近，现货价格与期货价格都会趋于一致，一种是期货向现货回归，另一种是现货向期货回归。从期货市场很难判断基差究竟会以哪种方式回归，所以只能从现货市场中寻找蛛丝马迹。

**供需关系**
影响商品现货价格的因素虽然有很多，但最终大都体现在供需关系上。如果买者多于卖者，价格就会上涨；如果卖者多于买者，价格就会下跌。国内的商品期货大致上可以分为：农产品和工业品。期货圈子中流传着这样一句话：“农产品看供给，工业品看需求。”农产品是刚需，需求是相对稳定的，决定价格主要看供给；工业品是下游需求带动的，再者国内基本都产能过剩，决定价格主要看需求。
 ![IMG](https://www.fmz.cn/upload/asset/38d207f320ba58e8831d.png) 
虽然，在实际操作中我们很难获取工业品的需求数据，也很难计算出农产品的供给数据。但是价格波动依存于供给与需求的相互作用，这种相互作用的结果就是库存。如果库存处于低位，说明市场供不应求，需求的力量大于供给的力量，未来价格看涨；如果库存处于高位，说明市场供大于求，供给的力量大于需求的力量，未来价格看跌。

**仓单**
所谓的仓单就是交易所的交割仓库入库现货后开具的标准仓单，它反映的是交易所公布的库存数量。当期货价格较高时，现货商就是注册仓单然后在市场上销售，所以根据这个原理我们可以反推出在期货中的交易方向。

- 期货多头：如果仓单大量减少，说明期货价格低于现货价格，应该做多。
- 期货空头：如果仓单大量增加，说明期货价格高于现货价格，应该做空。

另外，还可以利用仓单来判断库存。仓单既可以注册也可以注销，当期货主力想要价格上涨时，会把持有的注册仓单注销掉，改变交易所公布的库存数量，来达到交割货物不足的假象，进而影响期货价格上涨的预期。当期货主力想要价格下跌时，会注册仓单，造成交割货物增多的假象，使得被动影响期货价格下跌。
 ![IMG](https://www.fmz.cn/upload/asset/39daed0d2e941f0bee3f.png) 
到这里，基本面分析三大因素：库存、基差、仓单就已经凑齐了，有些做基本面分析的朋友可能还会加上产业利润、技术分析等等，增加窥视市场的维度，理论上两者相加是大于二的，因为能知道越多信息，越多的角度去观察市场，才能做出更好的决策。那么我们的基本面交易策略可以为一下条件：

- 多头：贴水 + 低库存 + 仓单减少
- 空头：升水 + 高库存 + 仓单增加

#### 四、实盘运行
 ![IMG](https://www.fmz.cn/upload/asset/39adb3bc41a77834c64c.png) 
 
#### 五、总结
回到本篇的开场，基本面分析和技术分析并不存在孰优孰劣，它们探究的是同一个市场，只是站的角度不同。没有人可以仅凭一个角度分析，就能窥视市场全部。我相信两者相加是大于二的，因为能知道越多信息，越多的角度去观察市场，才能做出更好的决策。



> Source (python)

``` python


import requests
from bs4 import BeautifulSoup
import time
import datetime
import json

diff_data = reserve_data = receipt_data = 0

def to_timestamp(date_str):
    time_array = time.strptime(date_str + " 00:00:00", "%Y-%m-%d %H:%M:%S")
    return int(round(time.mktime(time_array) * 1000))

def date_arr(year, month, day):
    begin, end = datetime.date(year, month, day), datetime.date.today()
    arr = []
    for i in range((end - begin).days + 1):
        day = begin + datetime.timedelta(days=i)
        arr.append([str(day).replace('-', ''), str(day),
                    day.weekday() + 1, to_timestamp(str(day))])
    return arr

def spot_futures_diff_data(date, futures_name):
    global diff_data
    url = f"http://www.100ppi.com/sf2/day-{date}.html"
    try:
        url_text = requests.get(url).text
    except BaseException:
        return int(diff_data)
    soup = BeautifulSoup(url_text, "html5lib")
    if len(soup.select("#fdata")) > 0:
        results = soup.select("#fdata")[0]
        for i in results.find_all('tr'):
            if len(i.find_all('td', text=futures_name)) > 0:
                data = i.find_all('font')[0].text
                if data is not None:
                    diff_data = data
    return int(diff_data)

def spot_data(date, futures_name, url_type, types):
    global reserve_data, receipt_data
    data_type = reserve_data if types == 'WHSTOCKS' else receipt_data
    url = f'http://www.shfe.com.cn/data/dailydata/{date}{url_type}.dat'
    Log(url)
    try:
        url_text = requests.get(url).text
    except BaseException:
        return data_type
    total = count = 0
    if url_text[0] == '{':
        for i in json.loads(url_text)['o_cursor']:
            if futures_name in i['VARNAME']:
                if '合计' not in i['WHABBRNAME']:
                    if '总计' not in i['WHABBRNAME']:
                        try:
                            inventory = int(i[types])
                        except BaseException:
                            return data_type
                        if inventory > 0:
                            total, count = total + inventory, count + 1
        if count > 0:
            data_type = int(total / count)
    return data_type

def main():
    cfgA = {
        "extension": {"layout": 'single', "col": 4, "height": "500px"},
        "title": {"text": "基差图表"},
        "series": [{"name": "基差", "data": []}]
    }
    cfgB = {
        "extension": {"layout": 'single', "col": 4, "height": "500px"},
        "title": {"text": "库存图表"},
        "series": [{"name": "库存", "data": []}]
    }
    cfgC = {
        "extension": {"layout": 'single', "col": 4, "height": "500px"},
        "title": {"text": "仓单图表"},
        "series": [{"name": "仓单", "data": []}]
    }
    LogReset()
    chart = Chart([cfgA, cfgB, cfgC])
    chart.reset()
    for i in date_arr(2018, 1, 1):
        diff = spot_futures_diff_data(i[1], '天然橡胶')
        reserve = spot_data(i[0], '天然橡胶', 'weeklystock', 'WHSTOCKS')
        receipt = spot_data(i[0], '天然橡胶', 'dailystock', 'WRTWGHTS')
        if diff != 0 and reserve != 0 and receipt != 0:
            chart.add(0, [i[3], diff])
            chart.add(1, [i[3], reserve])
            chart.add(2, [i[3], receipt])
            chart.update([cfgA, cfgB, cfgC])
            time.sleep(1)
            Log(f'基差：{diff} 库存：{reserve} 仓单：{receipt} 日期：{i[1]}')

```

> Detail

https://www.fmz.cn/strategy/161412

> Last Modified

2021-11-11 09:59:23
